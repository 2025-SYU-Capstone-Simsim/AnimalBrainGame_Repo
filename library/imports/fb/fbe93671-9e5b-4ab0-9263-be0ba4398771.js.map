{"version":3,"sources":["assets\\scripts\\PlayerController.ts"],"names":[],"mappings":";;;;;AAAC,oBAAoB;AACrB,4EAA4E;AAC5E,mBAAmB;AACnB,sFAAsF;AACtF,8BAA8B;AAC9B,sFAAsF;;;;;;;;;;;;;;;;;;;;;AAMhF,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAA8C,oCAAY;IAA1D;QAAA,qEAuCC;QAtCU,eAAS,GAAc,IAAK,CAAC;QAC7B,cAAQ,GAAW,EAAE,CAAC;QACtB,cAAQ,GAAW,EAAE,CAAC;QACtB,cAAQ,GAAW,EAAE,CAAC;;IAmCjC,CAAC;IAjCG,iCAAM,GAAN;QACI,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;IAC/E,CAAC;IAED,oCAAS,GAAT;QACI,EAAE,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;IAChF,CAAC;IAED,oCAAS,GAAT,UAAU,KAA6B;QACnC,IAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;QAC3C,IAAI,MAAM,GAAG,UAAU,CAAC,KAAK,EAAE,CAAC;QAChC,QAAQ,KAAK,CAAC,OAAO,EAAE;YACnB,KAAK,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;gBAChB,MAAM,CAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC;gBAC1B,MAAM;YACV,KAAK,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI;gBAClB,MAAM,CAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC;gBAC1B,MAAM;YACV,KAAK,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI;gBAClB,MAAM,CAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC;gBAC1B,MAAM;YACV,KAAK,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK;gBACnB,MAAM,CAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC;gBAC1B,MAAM;SACb;QACD,oBAAoB;QACpB,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;QACjD,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;QACjD,IAAI,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE;YACtE,OAAO,CAAE,mBAAmB;SAC/B;QACD,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;IAClC,CAAC;IAtCgB,gBAAgB;QADpC,OAAO;OACa,gBAAgB,CAuCpC;IAAD,uBAAC;CAvCD,AAuCC,CAvC6C,EAAE,CAAC,SAAS,GAuCzD;kBAvCoB,gBAAgB","file":"","sourceRoot":"/","sourcesContent":["﻿// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\n// PlayerController.ts\n// PlayerController.ts\nimport MazeLogic from \"./MazeLogic\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class PlayerController extends cc.Component {\n    public mazeLogic: MazeLogic = null!;\n    public cellSize: number = 50;\n    public gridCols: number = 21;\n    public gridRows: number = 21;\n\n    onLoad() {\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n    }\n\n    onDestroy() {\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n    }\n\n    onKeyDown(event: cc.Event.EventKeyboard) {\n        const currentPos = this.node.getPosition();\n        let newPos = currentPos.clone();\n        switch (event.keyCode) {\n            case cc.macro.KEY.up:\n                newPos.y += this.cellSize;\n                break;\n            case cc.macro.KEY.down:\n                newPos.y -= this.cellSize;\n                break;\n            case cc.macro.KEY.left:\n                newPos.x -= this.cellSize;\n                break;\n            case cc.macro.KEY.right:\n                newPos.x += this.cellSize;\n                break;\n        }\n        // 새 위치를 해당 셀 좌표로 환산\n        let cellX = Math.round(newPos.x / this.cellSize);\n        let cellY = Math.round(newPos.y / this.cellSize);\n        if (this.mazeLogic && !this.mazeLogic.isWalkable({ x: cellX, y: cellY })) {\n            return;  // 이동할 셀이 벽이면 이동 불가\n        }\n        this.node.setPosition(newPos);\n    }\n}"]}